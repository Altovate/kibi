<form
  role="form"
  ng-submit="opts.save()"
>
  <!--KIBI5: see how it differs from the new way-->
  <!--<div class="form-group">-->
    <!--[>kibi: dashboardgroup name tooltip<]-->
    <!--<label for="dashboardTitle">Save As-->
      <!--<kbn-info placement="right" info="The name of the dashboard will be shortened if you put it in a dashboard group with the same prefix, e.g., a 'People locations' dashboard will be displated as simply 'locations'-->
      <!--in the dropdown menu if placed in a 'People' dashboard group."></kbn-info>-->
    <!--</label>-->
    <!--<input id="dashboardTitle" type="text" ng-model="opts.dashboard.title" class="form-control" placeholder="Dashboard title" input-focus="select">-->
  <!--</div>-->
  <div class="kuiLocalDropdownTitle">Save {{opts.displayName}}</div>
  <input
    class="kuiLocalDropdownInput"
    id="dashboardTitle"
    type="text"
    ng-model="model.title"
    placeholder="Dashboard title"
    input-focus="select"
  >

  <saved-object-save-as-check-box saved-object="opts.dashboard"></saved-object-save-as-check-box>

  <div class="form-group">
    <label>
      <input
        type="checkbox"
        ng-model="model.timeRestore"
        ng-checked="model.timeRestore"
        data-test-subj="storeTimeWithDashboard"
      >
      Store time with {{opts.displayName}}
      <kbn-info placement="bottom" info="Change the time filter to the currently selected time each time this dashboard is loaded"></kbn-info>
    </label>
  </div>
  <!-- kibi: associate a saved search with this dashboard -->
  <div class="form-group">
    <label>Select Saved Search <a ng-click="toggleSavedSearchExplanation()">Why?</a>
    </label>

    <div ng-show="showSavedSearchExplanation" class="dashboard-explanation form-group">
      <p>
        Add a Saved Search to a dashboard to:
      </p>
      <ul>
        <li>Display a count of results (e.g. the hits on that saved search)</li>
        <li>Populate the dashboard with meaningful Widgets - filtering by clicking on the widget will always work coherently</li>
        <li>Enable relational navigation across Dashboards (Set to Set navigation)</li>
      </ul>
      <p>
        Dashboards without a Saved Search will be typically used only for cross index "summary pages".
      </p>
      <p>
        Note: To create a Saved Search from one of your Index Patterns, use the <a ng-click="jumpToDiscover()">Discovery</a> page.
      </p>
    </div>
    <kibi-select object-type="search" ng-model="opts.dashboard.savedSearchId"></kibi-select>
  </div>
  <!-- kibi: end -->

  <button type="submit" ng-disabled="!model.title" class="btn btn-primary" aria-label="Save dashboard">
    Save
  </button>
</form>
