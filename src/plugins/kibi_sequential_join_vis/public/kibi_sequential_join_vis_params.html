<div class="kibi-sequential-join-vis-params" id="kibi-sequential-join-vis-params">
  <ul>
    <li ng-repeat="button in vis.params.buttons" class="queryOptionArea" >
      <div class="header">
        <h2>Relational filter {{$index + 1}}</h2>
      </div>

      <div class="content">

        <div class="form-group">
          <label>Button label</label></br>
          <input required="true" type="text" ng-model="button.label" class="form-control"/>
        </div>
        <div class="form-group">
          <label>Custom filter label</label> <span>(optional)</span>
           <kbn-info placement="right" info="A custom label for the filter created by pressing the button. The default label is: '... related to ($COUNT) from $DASHBOARD. If used variables $COUNT and $DASHBOARD will be replaced by correct values.'">
           </kbn-info></br>
          <input type="text" ng-model="button.filterLabel" class="form-control"/>
        </div>


        <div class="form-group">
          <label>Source index</label></br/>
          <span>(this button will only work on a dashboard having this index as a search source)</span></br>
          <kibi-select required object-type="indexPattern" ng-model="button.sourceIndexPatternId">
          </kibi-select>
        </div>
        <div class="form-group">
          <label>Source index type</label></br/>
          <kibi-select object-type="indexPatternType" index-pattern-id="button.sourceIndexPatternId" ng-model="button.sourceIndexPatternType">
          </kibi-select>
        </div>
        <div class="form-group">
          <label>Source field</label></br/>
          <kibi-select required object-type="field" analyzed-warning="true" scripted-fields="false"
                     index-pattern-id="button.sourceIndexPatternId" ng-model="button.sourceField">
          </kibi-select>
        </div>


        <div class="form-group">
          <label>Target index</label></br/>
          <kibi-select required object-type="indexPattern" ng-model="button.targetIndexPatternId">
          </kibi-select>
        </div>
        <div class="form-group">
          <label>Target index type</label></br/>
          <kibi-select object-type="indexPatternType" index-pattern-id="button.targetIndexPatternId" ng-model="button.targetIndexPatternType">
          </kibi-select>
        </div>
        <div class="form-group">
          <label>Target field</label></br/>
          <kibi-select required object-type="field" analyzed-warning="true" scripted-fields="false"
                     index-pattern-id="button.targetIndexPatternId" ng-model="button.targetField">
          </kibi-select>
        </div>
        <div class="form-group">
          <label>Target dashboard</label></br/>
          <span>On click it will redirect to this dashboard</span></br>
          <kibi-select required object-type="dashboard" ng-model="button.redirectToDashboard">
          </kibi-select>
        </div>

        <!-- positioned via css to be in right top corner (keep it the last element) -->
        <div class="btn-group rightCorner">
          <kibi-array-param-up index="{{ $index }}" model="vis.params.buttons"></kibi-array-param-up>
          <kibi-array-param-down index="{{ $index }}" model="vis.params.buttons"></kibi-array-param-down>
          <kibi-array-param-remove index="{{ $index }}" model="vis.params.buttons"></kibi-array-param-remove>
        </div>

      </div>
    </li>
  </ul>
  <kibi-array-param-add required label="filter" model="vis.params.buttons"></kibi-array-param-add>
</div>
