[[graph-browser]]
=== Graph Browser

The Kibi Graph Browser http://todo[introduced in TODO] displays the currently selected Elasticsearch documents as a node of a graph.

image::images/graph-browser/graph-browser-example.png["Graph Browser Visualization",align="center"]

[float]
==== Pre-Requisites

To use the Kibi Graph Browser you first need to:

 * Set up a Kibi Tinkerpop3 datasource
 * Set up a query using the Kibi Tinkerpop3 datasource

[float]
==== Configuration
To configure the visualization, add a new *Script* and select:

 * *Query* - the query that will fetch the first node.
 * *Datasource* - the Kibi Tinkerpop3 datasource to be used.

image::images/graph-browser/graph-browser-config-script.png["Graph Browser Script configuration",align="center"]

By default every node is assigned with an icon and a label. It is possible to customize the style of both of them.

[float]
===== Custom Icon

To configure an icon, add a new *Icon* and select:

 * *Index Pattern* - the index pattern containing the type of documents you want to configure
 * *Icon Type* - the type of icon you want to use
 ** *Font awesome* - the icon will be selected using the vector icons from https://fortawesome.github.io/Font-Awesome/[Font Awesome]
 ** *Parameterized Relative Path* - the icon will be selected from the configured relative path. The relative path points to `<kibi_root>/installedPlugins/kibi_graph_browser_vis-0.1.0/public/icons/`. You can create subfolders to better organize your custom icons. If the icon filename is stored inside your document, you can use a parameterized relative path. Eg: `/set1/@[_doc][iconType]@.png` will be evaluated using the iconType field of the document.

image::images/graph-browser/graph-browser-config-icon.png["Node Icon configuration",align="center"]


[float]
===== Custom Label

To configure a label, add a new *Label* and select:

 * *Index Pattern* - the index pattern containing the documents you want to configure
 * *Document type* - the type of documents you want to configure
 * *Label type* - the type of label you want to use
 ** *Document Field* - the label will be a document field. You can select one of the available fields from the dropdown
 ** *Parameterized Field* - the label will be the evaluation of this parameterized field. e.g.: `Company: @doc[_source][companyName]@`


image::images/graph-browser/graph-browser-config-label.png["Node Label configuration",align="center"]


