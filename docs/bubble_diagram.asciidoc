[[bubble_diagram]]

=== Bubble Diagram [Enterprise Edition only]

ifeval::["{enterprise_enabled}" == "false"]
  NOTE: Documentation for Kibi Bubble Diagram is available only in Kibi
  Enterprise Edition.
endif::[]

ifeval::["{enterprise_enabled}" == "true"]

The Bubble Diagram visualization displays series of data grouped into packed circles.

image::images/bubble_diagram/first_image.png["First",align="center"]

[float]
==== Metrics

The radius of balls depends of the type of metric aggregations.

*Count*:: The {elastic-ref}/search-aggregations-metrics-valuecount-aggregation.html[_count_] aggregation returns a raw count of
the elements in the selected index pattern.
*Average*:: This aggregation returns the {elastic-ref}/search-aggregations-metrics-avg-aggregation.html[_average_] of a numeric
field. Select a field from the drop-down.
*Sum*:: The {elastic-ref}/search-aggregations-metrics-sum-aggregation.html[_sum_] aggregation returns the total sum of a numeric
field. Select a field from the drop-down.
*Min*:: The {elastic-ref}/search-aggregations-metrics-min-aggregation.html[_min_] aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.
*Max*:: The {elastic-ref}/search-aggregations-metrics-max-aggregation.html[_max_] aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.
*Unique Count*:: The {elastic-ref}/search-aggregations-metrics-cardinality-aggregation.html[_cardinality_] aggregation returns
the number of unique values in a field. Select a field from the drop-down.

[float]
===== Buckets Aggregations

The _buckets_ aggregations determine what information will come out in the diagram.

You can do two query in the same time.
The first aggregation will create the parent circles, while the second aggregation will create the children circles.

The difference between parents and children lies in the style of the labels and in the balls.
For the parents the labels are written in bold and the contour of the circles are more often.

The parents bubbles are divided by colors.
If you do a subquery (children) you will see a bubbles divide by family.
Children are located near the parent and all have same color.
Families are united. If you drag a bubble,  all members of the family will drag along.

image::images/bubble_diagram/all_bubbles.png["Node Icon configuration",align="center"]


[float]
==== Options

In the diagram there are three options

image::images/bubble_diagram/options.png["Node Icon configuration",align="center"]

*Show Parents*:: You can see the parents bubbles in the subquery and if you do a filters.

*Hidden Label*::  If checked hides the labels.

*Enable Zoom*:: Enables zoom on the page. To use the zoom you have to use the mouse wheel.

[float]
==== Balls movements

All balls gravitates towards the center of the visualisation.

When you drag a ball, its family follows.

image::images/bubble_diagram/move.png["Node Icon configuration",align="center"]

When you hover over a ball a detail information is shown in a tooltip.

image::images/bubble_diagram/table.png["Table",align="center"]

[float]
==== Filters

You can create filters by double-clicking on balls.

In case the bubble is a child you will see the filtered single bubble.

image::images/bubble_diagram/filter_child.png["Filter Child",align="center"]

If the bubble is a parent you will see the filtered family.

image::images/bubble_diagram/filter_parents.png["Filter Parents",align="center"]

endif::[]
